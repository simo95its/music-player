<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="./css/style.css">
</head>

<body>
	<audio id="audio"></audio>

	<!-- Search -->
	<div id="popup" class="popup">
		<div class="search">
			<input id="searchbar" type="text" placeholder="Search a song" onkeypress="handleKeyPress(event)">
			<i class="fa fa-search" aria-hidden="true"></i>
		</div>

		<!-- Song List -->
		<table id="list" class="list"></table>
	</div>


	<!-- Cover -->
	<div id="toggle" class="menu" toggle-target="popup">Menu</div>
	<div class="coverImage">
		<img src="song.png">
	</div>

	<!-- Player -->
	<div class="bodyPlayer">
		<div id="bars" hidden="false">
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>

			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
		</div>
		<div class="info">
			<h4 id="title"></h4>
			<h3 id="artist"></h3>
		</div>
		<table class="player">
			<td>
				<input type="checkbox" id="backward" />
				<label class="backward" for="backward"></label>
			</td>
			<td>
				<input type="checkbox" id="inpPlayPause" onclick="togglePlayPause()" />
				<label id="btnPlayPause" class="play" for="inpPlayPause"></label>
			</td>
			<td>
				<input type="checkbox" id="forward" onclick="changeTracks()" />
				<label class="forward" for="forward"></label>
			</td>
		</table>
	</div>

	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	 crossorigin="anonymous">
	</script>
	<script type="text/javascript" src="./main.js"></script>
	<script src="https://use.fontawesome.com/32a0411295.js"></script>
	<script src="https://use.fontawesome.com/81e18d6c6d.js"></script>
	<script type="text/javascript">

		$('#menu').click(function () {
			$('#popup').show;
		});

		var list = document.getElementById('list');
		//var items = listFiles();
		var items = {};
		$.ajax({
			url: "http://localhost:3003/list"
		}).done(function (data) {
			//items = JSON.parse(data);
			console.log('data: ' + data);
			console.log(typeof data)
			items = data;
			console.log('items: ' + items)
			console.log(typeof items)

			for (var i = 0; i < items.length; i++) {
				var song = document.createElement('tr');
				song.class = 'song';
				list.appendChild(song);
				var nr = document.createElement('td');
				nr.class = 'nr';
				var title = document.createElement('td');
				title.class = 'title';
				//var length = document.createElement('length');
				//length.class = 'length';				
				song.appendChild(nr);
				song.appendChild(title);
				//song.appendChild(length);				
				var number = document.createElement('h5');
				number.innerHTML = i + 1;
				nr.appendChild(number);
				var li_song = document.createElement('li');
				var nome = items[i];
				li_song.id = nome;
				title.appendChild(li_song);
				song.setAttribute('onclick', 'updateSource("' + li_song.id + '")');
				var title_header = document.createElement('h6');
				title_header.innerHTML = items[i].split(".", 1);
				li_song.appendChild(title_header);
				var no_length = document.createElement('h5');
				//no_length.innerHTML = "length";
				//length.appendChild(no_length);				
			}
		});

	</script>
</body>

</html>